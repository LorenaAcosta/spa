<div class="row">
    <h5 class="display">Lista de Comprobantes: </h5>
</div>
<ngx-spinner></ngx-spinner>
<!-- Tabla que lista el horario del empleado -->
<!-- array: horario-->
<div class="col-md-12" id="htmlData" #htmlData>
    <div class="card mb-4">
        <div class="card-body">
            <div class="table-responsive">
                <table class="table table-bordered display" id="dataTable" *ngIf="usuarios.length>0" width="50%" cellspacing="0">
                    <thead>
                        <tr>
                            <th>#</th>
                            <th>Nombre de usuario</th>
                            <th>Nombre</th>
                            <th>Apellido</th>
                            <th>Correo</th>
                            <th>Estado</th>
                            <th>Opciones</th>

                        </tr>
                    </thead>
                    <tbody *ngFor="let item of usuarios; let i = index">
                        <tr *ngIf="usuarioId != item.usuarioId">
                            <td>{{ i + 1}}</td>
                            <td>{{ item.username}}</td>
                            <td>{{ item.nombre}}</td>
                            <td>{{ item.apellido}}</td>
                            <td>{{ item.email}}</td>
                            <td *ngIf="item.enabled; else no">Activo</td>
                            <ng-template #no>
                                <td>Inactivo</td>
                            </ng-template>
                            <td>
                                <button type="button" class="btn btn-sm btn-warning mr-1" (click)="borrar(item.usuarioId, i)" placement="top" ngbTooltip="Dar de baja">
                                    <i class="fas fa-minus-circle"></i> 
                                </button>
                                <button class="btn btn-sm  btn-info mr-1" [routerLink]="['/usuarios-sistema/rol', item.usuarioId ]" placement="top" ngbTooltip="Asignar rol">
                                    <i class="fas fa-user-tag"></i> 
                                </button>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>


<div *ngIf="usuarios.length == 0" class="alertalert-warning text-center mt-3">
    <h4 class="alert-heading">No hay registros.</h4>
    <p>
        <i class="fa fa-exclamation fa-2x"></i>
    </p>
</div>





<button routerLink="/" class="btn btn-sm btn-info mr-1"><i class="fas fa-arrow-left"></i> Regresar
</button>
<button class="btn btn-sm btn-info mr-1" (click)="open(content)">Añadir Usuario</button>

<ng-template #content let-modal>
    <div class="modal-header alert-info">
        <h4 class="modal-title" id="modal-basic-title">Añadir Usuario</h4>
        <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
          <span aria-hidden="true">&times;</span> </button>
    </div>
    <div class="modal-body">
        <form [formGroup]="registerForm">
            <div class="form-group m-t-20">
                <div class="col-xs-12">
                    <input class="form-control" type="text" placeholder="Nombres" formControlName="nombre">
                </div>
            </div>
            <div class="form-group m-t-20">
                <div class="col-xs-12">
                    <input class="form-control" type="text" placeholder="Apellidos" formControlName="apellido">
                </div>
            </div>
            <div class="form-group m-t-20">
                <div class="col-xs-12">
                    <input class="form-control" type="text" placeholder="Nombre de usuario" formControlName="username">
                </div>
            </div>
            <div class="row">
                <div class="col text-danger">
                    <p *ngIf="campoNoValido('username')"> * El nombre de usuario es obligatorio</p>
                </div>
            </div>
            <div class="form-group ">
                <div class="col-xs-12">
                    <input class="form-control" type="text" placeholder="Correo" formControlName="email">
                </div>
            </div>
            <div class="row">
                <div class="col text-danger">
                    <p *ngIf="campoNoValido('email')"> * El correo es obligatorio y debe ser un correo valido</p>
                </div>
            </div>
            <div class="form-group ">
                <div class="col-xs-12">
                    <input class="form-control" type="password" placeholder="Contraseña" formControlName="password">
                </div>
            </div>
            <div class="form-group">
                <div class="col-xs-12">
                    <input class="form-control" type="password" placeholder="Confirmar contraseña" formControlName="password2">
                </div>
            </div>
            <div class="row">
                <div class="col text-danger">
                    <p *ngIf="passwordNoValido()"> * La contraseña debe tener un minimo de 3 caracteres</p>
                </div>
            </div>
            <div class="row">
                <div class="col text-danger">
                    <p *ngIf="passwordIguales()"> * Las contraseñas deben ser iguales</p>
                </div>
            </div>

        </form>
    </div>

    <div class="modal-footer">
        <button type="button" class="btn btn-outline-dark" (click)="guardar()">Guardar</button>
    </div>
</ng-template>